<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="心里有梦，眼里有光">
<meta property="og:type" content="website">
<meta property="og:title" content="hei">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="hei">
<meta property="og:description" content="心里有梦，眼里有光">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Hei">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>hei</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">hei</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/26/DB/MySQL/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Hei">
      <meta itemprop="description" content="心里有梦，眼里有光">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hei">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/26/DB/MySQL/" class="post-title-link" itemprop="url">MySQL</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-06-26 15:25:50" itemprop="dateCreated datePublished" datetime="2020-06-26T15:25:50+08:00">2020-06-26</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/26/Other/JinZhiZhuanHuan/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Hei">
      <meta itemprop="description" content="心里有梦，眼里有光">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hei">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/26/Other/JinZhiZhuanHuan/" class="post-title-link" itemprop="url">JinZhiZhuanHuan</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-06-26 15:25:02 / 修改时间：15:25:11" itemprop="dateCreated datePublished" datetime="2020-06-26T15:25:02+08:00">2020-06-26</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<h4 id="进制转换"><a href="#进制转换" class="headerlink" title="进制转换"></a>进制转换</h4></blockquote>
<p>十进制转其他进制</p>
<ul>
<li><p>原则 1：整数部分与小数部分分别转换；</p>
</li>
<li><p>原则 2：整数部分采用除基数(转换为 2 进制则每次除 2，转换为 8 进制每次除 8，以此类推)取余法，直到商为 0，而余数作为转换的结果，第一次除后的余数为最低位，最后一次的余数为最高位；</p>
</li>
<li><p>原则 3：小数部分采用乘基数(转换为 2 进制则每次乘 2，转换为 8 进制每次乘 8，以此类推)取整法，直至乘积为整数或达到控制精度。</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">725.625</span>D=<span class="number">1011010101.101</span>B</span><br><span class="line"><span class="number">725</span>/<span class="number">2</span> 余数<span class="number">1</span> 商<span class="number">362</span>  <span class="number">0.625</span>*<span class="number">2</span>=<span class="number">1.25</span> 整数部分<span class="number">1</span> 小数部分<span class="number">0.25</span></span><br><span class="line"><span class="number">362</span>/<span class="number">2</span> 余数<span class="number">0</span> 商<span class="number">181</span>  <span class="number">0.25</span>*<span class="number">2</span>=<span class="number">0.5</span> 整数部分<span class="number">0</span> 小数部分<span class="number">0.5</span></span><br><span class="line">....               ......</span><br><span class="line"><span class="number">2</span>/<span class="number">2</span> 余数<span class="number">0</span> 商<span class="number">1</span>       <span class="number">0.5</span>*<span class="number">2</span>=<span class="number">1.0</span> 整数部分<span class="number">1</span> 小数部分<span class="number">0</span></span><br><span class="line"><span class="number">1</span>/<span class="number">2</span> 余数<span class="number">1</span> 商<span class="number">0</span></span><br></pre></td></tr></table></figure>

<p>其他进制转十进制</p>
<ul>
<li>按权展开法，即把各数位乘权的 i 次方后相加</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#二进制转十进制</span></span><br><span class="line"><span class="number">01011010.01</span>B=<span class="number">0</span>×<span class="number">2</span>^<span class="number">7</span>+<span class="number">1</span>×<span class="number">2</span>^<span class="number">6</span>+<span class="number">0</span>×<span class="number">2</span>^<span class="number">5</span>+<span class="number">1</span>×<span class="number">2</span>^<span class="number">4</span>+<span class="number">1</span>×<span class="number">2</span>^<span class="number">3</span>+<span class="number">0</span>×<span class="number">2</span>^<span class="number">2</span>  +<span class="number">1</span>×<span class="number">2</span>^<span class="number">1</span>+<span class="number">0</span>×<span class="number">2</span>^<span class="number">0</span>+<span class="number">0</span>×<span class="number">2</span>^<span class="number">-1</span>+<span class="number">1</span>×<span class="number">2</span>^<span class="number">-2</span> = <span class="number">90.25</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/26/Linux/Linux/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Hei">
      <meta itemprop="description" content="心里有梦，眼里有光">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hei">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/26/Linux/Linux/" class="post-title-link" itemprop="url">Linux</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-06-26 15:23:57 / 修改时间：15:24:08" itemprop="dateCreated datePublished" datetime="2020-06-26T15:23:57+08:00">2020-06-26</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h1><h2 id="linux-命令重定向-gt-、-gt-gt-、-1-gt-、-2-gt-、-1-gt-gt-、-2-gt-gt-、-lt"><a href="#linux-命令重定向-gt-、-gt-gt-、-1-gt-、-2-gt-、-1-gt-gt-、-2-gt-gt-、-lt" class="headerlink" title="linux 命令重定向&gt;、&gt;&gt;、 1&gt;、 2&gt;、 1&gt;&gt;、 2&gt;&gt;、 &lt;"></a>linux 命令重定向&gt;、&gt;&gt;、 1&gt;、 2&gt;、 1&gt;&gt;、 2&gt;&gt;、 &lt;</h2><h3 id="gt-和-gt-gt-："><a href="#gt-和-gt-gt-：" class="headerlink" title="&gt;和&gt;&gt;："></a>&gt;和&gt;&gt;：</h3><p>他们俩其实唯一的区别就是&gt;是重定向到一个文件，&gt;&gt;是追加内容到文件。两个命令都是如果文件不存在则创建文件</p>
<h3 id="1-gt-、-2-gt-、-1-gt-gt-、-2-gt-gt"><a href="#1-gt-、-2-gt-、-1-gt-gt-、-2-gt-gt" class="headerlink" title="1&gt;、 2&gt;、 1&gt;&gt;、 2&gt;&gt;"></a>1&gt;、 2&gt;、 1&gt;&gt;、 2&gt;&gt;</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python pp.py 1&gt; right.txt 2&gt; wrong.txt</span><br></pre></td></tr></table></figure>

<h3 id="让错误和正确的结果都被重定向到同一个文件"><a href="#让错误和正确的结果都被重定向到同一个文件" class="headerlink" title="让错误和正确的结果都被重定向到同一个文件"></a>让错误和正确的结果都被重定向到同一个文件</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">python pp.py 1&gt; ppp.txt 2&gt;&amp;1</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#追加</span></span></span><br><span class="line">python pp.py 1&gt;&gt; pp.txt 2&gt;&amp;1</span><br></pre></td></tr></table></figure>

<h3 id="保存正确，错误不保存"><a href="#保存正确，错误不保存" class="headerlink" title="保存正确，错误不保存"></a>保存正确，错误不保存</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python pp.py 1&gt;&gt;right.txt 2&gt;&#x2F;dev&#x2F;null</span><br></pre></td></tr></table></figure>

<h3 id="lt"><a href="#lt" class="headerlink" title="&lt;"></a>&lt;</h3><p>那么&lt;又是什么意思呢？&lt;可以将原本由标准输入改为由指定地方输入举个例子就明白了：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vi hh</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt; txt.py &lt; hh</span></span><br><span class="line">cat txt.py</span><br><span class="line">qwejqwoijeoq</span><br></pre></td></tr></table></figure>

<h2 id="获取进程-PID"><a href="#获取进程-PID" class="headerlink" title="获取进程 PID"></a>获取进程 PID</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pid=$(ps -ef | grep name | grep -v grep | awk <span class="string">'&#123;print $2&#125;'</span>)</span><br><span class="line"></span><br><span class="line">pid=$(ps x | awk <span class="string">'/[n]ame/&#123;print $1&#125;'</span>)</span><br></pre></td></tr></table></figure>

<h2 id="查看指定进程是否存在"><a href="#查看指定进程是否存在" class="headerlink" title="查看指定进程是否存在"></a>查看指定进程是否存在</h2><p>在获取到 pid 之后，还可以根据 pid 查看对应的进程是否存在（运行），这个方法也可以用于 kill 指定的进程。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if ps -p $PID &gt; /dev/null</span><br><span class="line">then</span><br><span class="line">   echo "$PID is running"</span><br><span class="line"><span class="meta">   #</span><span class="bash"> Do something knowing the pid exists, i.e. the process with <span class="variable">$PID</span> is running</span></span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<h2 id="双向重定向-tee-命令"><a href="#双向重定向-tee-命令" class="headerlink" title="双向重定向 tee 命令"></a>双向重定向 tee 命令</h2><p>既输出到屏幕，也输出文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tee</span><br><span class="line"><span class="meta">#</span><span class="bash">-a 追加模式</span></span><br><span class="line">last |tee last.file|cut -d " " -f1</span><br></pre></td></tr></table></figure>

<h2 id="tr-col-join-paste-expand"><a href="#tr-col-join-paste-expand" class="headerlink" title="tr col join paste expand"></a>tr col join paste expand</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">tr [-ds] Setstring...</span><br><span class="line"><span class="meta">#</span><span class="bash">-d删除信息中Setstring这个字符串</span></span><br><span class="line"><span class="meta">#</span><span class="bash">-s替换信息中Ssetstring这个字符串</span></span><br><span class="line"></span><br><span class="line">col [-xb]</span><br><span class="line"><span class="meta">#</span><span class="bash">-x 将tab键转换成对等的空格键</span></span><br><span class="line"><span class="meta">#</span><span class="bash">-b 在文字中有反斜杠（/）时，仅保留反斜杠最后接的那个字符</span></span><br><span class="line"></span><br><span class="line">join -[ti12] file1 file2</span><br><span class="line"><span class="meta">#</span><span class="bash">-i忽略大小写</span></span><br><span class="line"><span class="meta">#</span><span class="bash">-t join默认以空格为分隔符，并且比对第一个字段的数据，如果两个文件相同，则将两条数据连成一行，且第一个字段放在第一个</span></span><br><span class="line"><span class="meta">#</span><span class="bash">-1 第一个文件使用哪个字段来分析</span></span><br><span class="line"><span class="meta">#</span><span class="bash">-2 第二个文件使用哪个字段来分析</span></span><br><span class="line"></span><br><span class="line">expand [-t] file #将tab转换为空格</span><br><span class="line"><span class="meta">#</span><span class="bash">-t 后面可以接数字，一般来说一个tab可以用8个空格替换，也可以自己定义</span></span><br></pre></td></tr></table></figure>

<h2 id="查看内存"><a href="#查看内存" class="headerlink" title="查看内存"></a>查看内存</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/meminfo</span><br></pre></td></tr></table></figure>

<p>进程的内存使用信息也可以通过<code>/proc/&lt;pid&gt;/statm</code>和 <code>/proc/&lt;pid&gt;/status</code>来查看</p>
<h2 id="输出文件的指定行数"><a href="#输出文件的指定行数" class="headerlink" title="输出文件的指定行数"></a>输出文件的指定行数</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">显示最后1000行</span></span><br><span class="line">tail -n 1000</span><br><span class="line"><span class="meta">#</span><span class="bash">从1000行开始显示，显示1000行以后的</span></span><br><span class="line">tail -n +1000</span><br><span class="line"><span class="meta">#</span><span class="bash">显示前面1000行</span></span><br><span class="line">head -n 1000</span><br><span class="line"><span class="meta">#</span><span class="bash">显示file文件中匹配foo字符串那行以及上下5行</span></span><br><span class="line">grep -C 5 foo filename</span><br><span class="line"><span class="meta">#</span><span class="bash">显示foo及前5行</span></span><br><span class="line">grep -B 5 foo filename</span><br><span class="line"><span class="meta">#</span><span class="bash">显示foo及后5行</span></span><br><span class="line">grep -A 5 foo filename</span><br><span class="line"><span class="meta">#</span><span class="bash">这样你就可以只查看文件的第5行到第10行</span></span><br><span class="line">sed -n '5,10p' filename</span><br></pre></td></tr></table></figure>

<h2 id="sed-命令"><a href="#sed-命令" class="headerlink" title="sed 命令"></a>sed 命令</h2><p>sed 遵循简单的工作流：读取（从输入中读取某一行），执行（在某一行上执行 sed 命令）和显示（把结果显示在输出中）。</p>
<p>sed 以一个长流的方式处理多个输入文件。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">-i可以编辑原文件并将替换结果打印到标准输出</span></span><br><span class="line">sed -i "s/hello/world/" input.txt</span><br><span class="line"><span class="meta">#</span><span class="bash">删除空白行</span></span><br><span class="line">sed '/^$/d' test.txt</span><br><span class="line"><span class="meta">#</span><span class="bash">删除文件的第二行</span></span><br><span class="line">sed '2d' test.txt</span><br><span class="line"><span class="meta">#</span><span class="bash">删除文件的第二行到最后一行</span></span><br><span class="line">sed '2,$d' test.txt</span><br><span class="line"><span class="meta">#</span><span class="bash">从文件读入：r命令</span></span><br><span class="line"><span class="meta">#</span><span class="bash">file里的内容被读进来，显示在与<span class="built_in">test</span>匹配的行后面，如果匹配多行，则file的内容将显示在所有匹配行的下面：</span></span><br><span class="line">sed '/my/r test1.txt' test.txt</span><br><span class="line"><span class="meta">#</span><span class="bash">写入文件：w命令</span></span><br><span class="line">sed -n '/my/w test2.txt' test.txt</span><br><span class="line"><span class="meta">#</span><span class="bash">打印奇数行或偶数行</span></span><br><span class="line"><span class="meta">#</span><span class="bash">奇数</span></span><br><span class="line">sed -n 'p;n' test.txt</span><br><span class="line"><span class="meta">#</span><span class="bash">偶数</span></span><br><span class="line">sed -n 'n;p' test.txt</span><br></pre></td></tr></table></figure>

<h2 id="seq-命令"><a href="#seq-命令" class="headerlink" title="seq 命令"></a>seq 命令</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">用于产生从某个数到另外一个数之间的所有整数</span></span><br><span class="line">seq 1 10</span><br><span class="line"><span class="meta">#</span><span class="bash">结果是1 2 3 4 5 6 7 8 9 10</span></span><br></pre></td></tr></table></figure>

<h2 id="lsb-release-a"><a href="#lsb-release-a" class="headerlink" title="lsb_release -a"></a>lsb_release -a</h2><p>显示内核等信息</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@ecs-4f53 tests]# lsb_release -a</span><br><span class="line">LSB Version:    :core-4.1-amd64:core-4.1-noarch</span><br><span class="line">Distributor ID: CentOS</span><br><span class="line">Description:    CentOS Linux release 7.6.1810 (Core)</span><br><span class="line">Release:        7.6.1810</span><br><span class="line">Codename:       Core</span><br></pre></td></tr></table></figure>

<h2 id="more-less"><a href="#more-less" class="headerlink" title="more less"></a>more less</h2><p>more 命令</p>
<ul>
<li>空格键（SPACE）：向下翻一页</li>
<li>Enter ：向下滚一行</li>
<li>/字符串 ：向下查询该字符串</li>
<li>:f ：立刻显示出文件名和目前显示的行数</li>
<li>q ：退出 more</li>
<li>b ：往前翻页，只对文件有效对管道无效</li>
</ul>
<p>less 命令</p>
<ul>
<li>空格键 ： 向下翻一页</li>
<li>PageDown ：向下翻一页</li>
<li>PageUp ：向上翻一页</li>
<li>/字符串 ：向下查询字符串</li>
<li>?字符串 ：向上查询字符串</li>
<li>q ：退出</li>
</ul>
<h2 id="find-locate-whereis"><a href="#find-locate-whereis" class="headerlink" title="find locate whereis"></a>find locate whereis</h2><p>find 是直接查询硬盘，所以耗时比较久，locate 和 whereis 都是查询数据库，而 linux 的数据库更新一般是一天一更<br>当然也可以使用手动强更 updatedb，而 locate 是模糊搜索，只要完整的文件名（包含路径名称）中含有单词即可查询到</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">locate</span><br><span class="line">-i: 忽略大小写的诧异</span><br><span class="line">-r:后面可接正则表达式的显示方式</span><br><span class="line">find</span><br><span class="line">1,-atime,-ctime,-mtime</span><br><span class="line">-mtime n #在n天内之前的“一天内”被修改过的文件</span><br><span class="line">-mtime +n #列出在n天之前（不含n天本身）被修改过的文件名；</span><br><span class="line">-mtime -n #列出在n天之内（含n天本身）被修改过的文件名</span><br><span class="line">-newer file #file为一个存在的文件，列出比file还要新的文件名</span><br><span class="line">find / -mtime 0 # 将/下在24小时内有改动的文件列出</span><br><span class="line">find /etc -newer /etc/passwd #寻找/etc下比/etc/passwd文件更新的文件</span><br><span class="line">2,与用户或用户组有关的参数</span><br><span class="line">-uid n #n为数字，用户的UID</span><br><span class="line">-gid n #n为数字，用户组的GID</span><br><span class="line">-user name #name为用户账号名称</span><br><span class="line">-group name #name为用户组名</span><br><span class="line">-nouser #寻找文件的所有者不存在于/etc/passwd的人</span><br><span class="line">-nogroup #寻找文件的所有用户组不存在于/etc/group的文件</span><br><span class="line">find / -nouser</span><br><span class="line">find /home -user vbird</span><br><span class="line">3,跟文件权限有关的参数</span><br><span class="line">4,其它可进行的操作</span><br><span class="line">-exec command</span><br><span class="line">-print #默认</span><br><span class="line">find / -size +1000k #查找系统中大于1MB的文件</span><br><span class="line">find / -perm +7000 -exec ls -l &#123;&#125; \;#查找文件中含有SGID或SUID或SBIT的属性 并列出权限</span><br></pre></td></tr></table></figure>

<h1 id="软连接和硬连接"><a href="#软连接和硬连接" class="headerlink" title="软连接和硬连接"></a>软连接和硬连接</h1><p>硬连接，通过文件系统的 inode 连接来产生新的文件名，而不是产生新的文件。</p>
<p><code>ln</code></p>
<p>生成一个新的文件名，新的文件名的 block 可以指向 real 文件，然后取 real 文件的 inode 从而得到文件的实际内容<br>例如，1 和 2 都是文件名，1 和 2 的 block 指向 real，real 的 inode 指向实际内容</p>
<p>作用就是安全，删除任意一个“文件名”，实际文件都还存在</p>
<p>软连接<br><code>ln -s</code></p>
<p>例如，文件 1 是文件名，2 是软连接，2 的 block 指向 1，而 1 的指向 real，real 指向实际的文件内容</p>
<h1 id="Other"><a href="#Other" class="headerlink" title="Other"></a>Other</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pid=$(ps -ef | grep "sssj" | grep -v grep | awk '&#123;print $2&#125;')</span><br><span class="line"></span><br><span class="line">kill -2 $pid</span><br><span class="line"></span><br><span class="line">ps aux|grep sssjserver</span><br><span class="line"></span><br><span class="line">./build.sh</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">svn up</span><br><span class="line">WORK_DIR=<span class="variable">$PWD</span></span><br><span class="line">OUTPUT_DIR=<span class="variable">$WORK_DIR</span><span class="string">"/bin"</span></span><br><span class="line"><span class="built_in">export</span> GOPATH=<span class="variable">$WORK_DIR</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$GOPATH</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$OUTPUT_DIR</span></span><br><span class="line"></span><br><span class="line">ls -lrt <span class="variable">$OUTPUT_DIR</span></span><br><span class="line"></span><br><span class="line">go build -o <span class="variable">$OUTPUT_DIR</span>/server server</span><br><span class="line">go build -o <span class="variable">$OUTPUT_DIR</span>/login login</span><br><span class="line">go build -o <span class="variable">$OUTPUT_DIR</span>/recharge recharge</span><br><span class="line">go build -o <span class="variable">$OUTPUT_DIR</span>/world world</span><br><span class="line"></span><br><span class="line">ls -lrt <span class="variable">$OUTPUT_DIR</span></span><br></pre></td></tr></table></figure>

<h3 id="start-sh"><a href="#start-sh" class="headerlink" title="./start.sh"></a>./start.sh</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nohup ./sssjserver  &amp;</span><br><span class="line"></span><br><span class="line">ps aux|grep sssjserver</span><br></pre></td></tr></table></figure>

<h3 id="svnupdata-sh"><a href="#svnupdata-sh" class="headerlink" title="./svnupdata.sh"></a>./svnupdata.sh</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">cd gamedata</span><br><span class="line">rm ./*.txt</span><br><span class="line"></span><br><span class="line">svn up</span><br><span class="line">cd map</span><br><span class="line">rm ./*.json</span><br><span class="line">svn up</span><br><span class="line">cd ..</span><br><span class="line">cd ..</span><br><span class="line"><span class="meta">#</span><span class="bash">svn up gamedata</span></span><br><span class="line"></span><br><span class="line">./stop.sh &amp;</span><br><span class="line">sleep 2s</span><br><span class="line">./start.sh &amp;</span><br></pre></td></tr></table></figure>

<h2 id="Nginx-配置"><a href="#Nginx-配置" class="headerlink" title="Nginx 配置"></a>Nginx 配置</h2><ul>
<li>nginx.conf</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">  For more information on configuration, see:</span></span><br><span class="line"><span class="meta">#</span><span class="bash">   * Official English Documentation: http://nginx.org/en/docs/</span></span><br><span class="line"><span class="meta">#</span><span class="bash">   * Official Russian Documentation: http://nginx.org/ru/docs/</span></span><br><span class="line"></span><br><span class="line">user nginx;</span><br><span class="line">worker_processes auto;</span><br><span class="line"><span class="meta">#</span><span class="bash">error_log /var/<span class="built_in">log</span>/nginx/error.log;</span></span><br><span class="line">pid /var/run/nginx.pid;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Load dynamic modules. See /usr/share/nginx/README.dynamic.</span></span><br><span class="line">include /usr/share/nginx/modules/*.conf;</span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '</span><br><span class="line">                      '$status $body_bytes_sent "$http_referer" '</span><br><span class="line">                      '"$http_user_agent" "$http_x_forwarded_for"';</span><br><span class="line"></span><br><span class="line">    #access_log  /var/log/nginx/access.log  main;</span><br><span class="line"></span><br><span class="line">    sendfile            on;</span><br><span class="line">    tcp_nopush          on;</span><br><span class="line">    tcp_nodelay         on;</span><br><span class="line">    keepalive_timeout   65;</span><br><span class="line">    types_hash_max_size 2048;</span><br><span class="line"></span><br><span class="line">    include             /etc/nginx/mime.types;</span><br><span class="line">    default_type        application/octet-stream;</span><br><span class="line"></span><br><span class="line">        gzip on;</span><br><span class="line">    gzip_min_length 1k;</span><br><span class="line">    gzip_buffers 4 16k;</span><br><span class="line">    gzip_http_version 1.0;</span><br><span class="line">    gzip_comp_level 1;</span><br><span class="line">    gzip_types    text/css text/plain image/jpeg image/png image/x-icon application/json application/javascript audio/mpeg;</span><br><span class="line">    gzip_vary on;</span><br><span class="line">        gzip_static on;</span><br><span class="line">    gzip_disable "MSIE [1-6]\.";</span><br><span class="line"></span><br><span class="line">    add_header Access-Control-Allow-Origin *;</span><br><span class="line">        add_header Access-Control-Allow-Headers X-Requested-With;</span><br><span class="line">        add_header Access-Control-Allow-Methods GET,POST,OPTIONS;</span><br><span class="line"></span><br><span class="line">    # Load modular configuration files from the /etc/nginx/conf.d directory.</span><br><span class="line">    # See http://nginx.org/en/docs/ngx_core_module.html#include</span><br><span class="line">    # for more information.</span><br><span class="line">    #include /etc/nginx/conf.d/*.conf;</span><br><span class="line">        include /etc/nginx/conf.d/default.conf;</span><br><span class="line">    include /etc/nginx/conf.d/upstream.conf;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>conf.d/default.conf</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> The default server</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        listen       443  ssl;</span><br><span class="line">        server_name  _;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    ssl_certificate             /etc/nginx/conf.d/xxxxx.crt;</span><br><span class="line">    ssl_certificate_key         /etc/nginx/conf.d/xxxx.key;</span><br><span class="line">    ssl_session_timeout 5m;</span><br><span class="line">    ssl_session_cache shared:SSL:50m;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    ssl_protocols SSLv3 SSLv2 TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line">    ssl_ciphers ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP;</span><br><span class="line">    underscores_in_headers on;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">                root   /sssj/client;</span><br><span class="line">        index  index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    error_page 404 /404.html;</span><br><span class="line">        location = /40x.html &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    error_page 500 502 503 504 /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">        include /etc/nginx/conf.d/location.conf;</span><br><span class="line">        include /etc/nginx/conf.d/pay.conf;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>conf.d/location.conf</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">location /30010 &#123;proxy_pass http://port_30010; proxy_http_version 1.1; proxy_set_header Upgrade <span class="variable">$http_upgrade</span>; proxy_set_header Connection <span class="string">"Upgrade"</span>;&#125;</span><br><span class="line">location /30101 &#123;proxy_pass http://port_30101; proxy_http_version 1.1; proxy_set_header Upgrade <span class="variable">$http_upgrade</span>; proxy_set_header Connection <span class="string">"Upgrade"</span>;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>conf.d/upstream.conf</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">upstream port_30010 &#123; server 127.0.0.1:30010;&#125;</span><br><span class="line">upstream port_30101 &#123; server 127.0.0.1:30101;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>conf.d/pay.conf</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">location /XXX_pay/YYY                 &#123;proxy_pass http://127.0.0.1:30020/YYY;&#125;</span><br><span class="line">location /XXX_pay/ZZZ                 &#123;proxy_pass http://127.0.0.1:30020/ZZZ;&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/26/Algorithm/Tree/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Hei">
      <meta itemprop="description" content="心里有梦，眼里有光">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hei">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/26/Algorithm/Tree/" class="post-title-link" itemprop="url">Tree</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-06-26 15:23:21 / 修改时间：15:23:25" itemprop="dateCreated datePublished" datetime="2020-06-26T15:23:21+08:00">2020-06-26</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<h4 id="树"><a href="#树" class="headerlink" title="树"></a>树</h4></blockquote>
<ul>
<li>前序遍历： 根结点 —&gt; 左子树 —&gt; 右子树</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1、创建一个栈对象，将根节点入栈；</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2、当栈为非空时，将栈顶结点弹出栈并访问该结点；</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//3、对当前访问的非空左孩子结点相继依次访问（不需要入栈），并将访问结点的非空右孩子结点入栈</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//4、重复执行步骤②和步骤③，直到栈为空为止</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">PreStackTraverse</span><span class="params">(t *TreeNode)</span></span>&#123;<span class="comment">//先根遍历，非递归</span></span><br><span class="line">	<span class="keyword">if</span> t != <span class="literal">nil</span> &#123;</span><br><span class="line">		S := CreateStack()</span><br><span class="line">		S.Push(t)</span><br><span class="line">		<span class="keyword">for</span> !S.IsEmpty() &#123;</span><br><span class="line">			T,_ := S.Pop()</span><br><span class="line">			fmt.Printf(<span class="string">"%d "</span>,T.Value)</span><br><span class="line">			<span class="keyword">for</span> T != <span class="literal">nil</span> &#123;</span><br><span class="line">				<span class="keyword">if</span> T.Left != <span class="literal">nil</span> &#123;</span><br><span class="line">					fmt.Printf(<span class="string">"%d "</span>,T.Left.Value)</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">if</span> T.Right != <span class="literal">nil</span> &#123;</span><br><span class="line">					S.Push(T.Right)</span><br><span class="line">				&#125;</span><br><span class="line">				T = T.Left</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>中序遍历：左子树—&gt; 根结点 —&gt; 右子树</p>
</li>
<li><p>后序遍历：左子树 —&gt; 右子树 —&gt; 根结点</p>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/26/Other/ClientKnowledge/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Hei">
      <meta itemprop="description" content="心里有梦，眼里有光">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hei">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/26/Other/ClientKnowledge/" class="post-title-link" itemprop="url">ClientKnowledge</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-06-26 15:22:24 / 修改时间：15:22:36" itemprop="dateCreated datePublished" datetime="2020-06-26T15:22:24+08:00">2020-06-26</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="跨域"><a href="#跨域" class="headerlink" title="跨域"></a>跨域</h3><table>
<thead>
<tr>
<th align="center">URL</th>
<th>Description</th>
<th align="center">是否允许通信</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>http://www.d.com/d.js</code><br><code>http://www.d.com/w.js</code></td>
<td>同一域名下</td>
<td align="center">允许</td>
</tr>
<tr>
<td align="center"><code>http://www.d.com/lab/a.js</code><br><code>http://www.d.com//src/b.js</code></td>
<td>同一域名下不同文件夹</td>
<td align="center">允许</td>
</tr>
<tr>
<td align="center"><code>http://www.d.com:3333/a.js</code><br><code>http://www.d.com:4444/b.js</code></td>
<td>同一域名不同端口</td>
<td align="center">不允许</td>
</tr>
<tr>
<td align="center"><code>http://www.d.com/a.js</code><br><code>http://46.33.22.44/b.js</code></td>
<td>域名和域名对应 IP</td>
<td align="center">不允许</td>
</tr>
<tr>
<td align="center"><code>http://www.d.com/a.js</code><br><code>http://script.d.com/b.js</code></td>
<td>主域相同，子域不同</td>
<td align="center">不允许</td>
</tr>
<tr>
<td align="center"><code>http://www.d.com/a.js</code><br><code>http://d.com/w.js</code></td>
<td>同一域名,不同二级域名<br>（同上）</td>
<td align="center">不允许(cookie 这种情况下也不允许访问)</td>
</tr>
<tr>
<td align="center"><code>http://www.d.com/d.js</code><br><code>http://www.v.com/w.js</code></td>
<td>不同域名</td>
<td align="center">不允许</td>
</tr>
</tbody></table>
<p>js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">res.header(<span class="string">'Access-Control-Allow-Origin'</span>, <span class="string">'*'</span>)</span><br><span class="line">res.header(<span class="string">'Access-Control-Allow-Headers'</span>, <span class="string">'X-Requested-With,Content-Type'</span>)</span><br><span class="line">res.header(<span class="string">'Access-Control-Allow-Methods'</span>, <span class="string">'PUT,POST,GET,DELETE,OPTIONS'</span>)</span><br></pre></td></tr></table></figure>

<p>golang</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//	Origin := r.Header.Get("Origin")</span></span><br><span class="line"><span class="comment">//	if Origin != "" &#123;</span></span><br><span class="line"><span class="comment">//		w.Header().Add("Access-Control-Allow-Origin", "*")</span></span><br><span class="line"><span class="comment">//		w.Header().Add("Access-Control-Allow-Methods", "POST,GET,OPTIONS,DELETE")</span></span><br><span class="line"><span class="comment">//		w.Header().Add("Access-Control-Allow-Headers", "x-requested-with,content-type")</span></span><br><span class="line"><span class="comment">//		w.Header().Add("Access-Control-Allow-Credentials", "true")</span></span><br><span class="line"><span class="comment">//	&#125;</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/26/Algorithm/Algorithm/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Hei">
      <meta itemprop="description" content="心里有梦，眼里有光">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hei">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/26/Algorithm/Algorithm/" class="post-title-link" itemprop="url">Algorithm</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-06-26 15:19:32 / 修改时间：15:20:57" itemprop="dateCreated datePublished" datetime="2020-06-26T15:19:32+08:00">2020-06-26</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Leetcode"><a href="#Leetcode" class="headerlink" title="Leetcode"></a>Leetcode</h1><ul>
<li>[189.Rotate Array](#189.Rotate Array)</li>
<li>[193. Valid Phone Numbers](#193.-Valid Phone Numbers)</li>
<li>[198. House Robber](#198.-House Robber)</li>
</ul>
<h4 id="189-Rotate-Array"><a href="#189-Rotate-Array" class="headerlink" title="189.Rotate Array"></a>189.Rotate Array</h4><p>如果 k&gt;n</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//author:abbycoding</span></span><br><span class="line"><span class="comment">//comments:genius</span></span><br><span class="line"><span class="comment">//such as</span></span><br><span class="line"><span class="comment">// [1,2,3,4,5]  k=2</span></span><br><span class="line"><span class="comment">// output [4,5,1,2,3]</span></span><br><span class="line"><span class="comment">// n=5, k = k % n = 2,</span></span><br><span class="line"><span class="comment">//reverse(nums,0,4)  [1,2,3,4,5] ==&gt; [5,4,3,2,1]</span></span><br><span class="line"><span class="comment">//reverse(nums,0,1)  [5,4,3,2,1] ==&gt; [4,5,3,2,1]</span></span><br><span class="line"><span class="comment">//reverse(nums,2,4)  [4,5,3,2,1] ==&gt; [4,5,1,2,3]</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">rotate</span><span class="params">(nums []<span class="keyword">int</span>, k <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    n := <span class="built_in">len</span>(nums) <span class="comment">//数组长度</span></span><br><span class="line">	k %= n <span class="comment">//如果k&gt;n的情况，则取k/n的余数</span></span><br><span class="line">    reverse(nums, <span class="number">0</span>, n - <span class="number">1</span>)</span><br><span class="line">    reverse(nums, <span class="number">0</span>, k - <span class="number">1</span>)</span><br><span class="line">    reverse(nums, k, n - <span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//反转 交换</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">reverse</span><span class="params">(nums []<span class="keyword">int</span>, start <span class="keyword">int</span>, end <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> start &lt; end &#123;</span><br><span class="line">        nums[start], nums[end] = nums[end], nums[start]</span><br><span class="line">        start++</span><br><span class="line">        end--</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="193-Valid-Phone-Numbers"><a href="#193-Valid-Phone-Numbers" class="headerlink" title="193. Valid Phone Numbers"></a>193. Valid Phone Numbers</h4><p>file.txt 是每行都是一串的数字，<br>从 file.txt 选出合法的电话号码，电话号码的格式为：</p>
<p>(xxx) xxx-xxxx or xxx-xxx-xxxx.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">grep -P '^(\d&#123;3&#125;-|\(\d&#123;3&#125;\) )\d&#123;3&#125;-\d&#123;4&#125;$' file.txt</span><br><span class="line"><span class="meta">#</span><span class="bash">-r参数开启扩展正则模式，-n只打印被sed处理的行</span></span><br><span class="line">sed -n -r '/^([0-9]&#123;3&#125;-|\([0-9]&#123;3&#125;\) )[0-9]&#123;3&#125;-[0-9]&#123;4&#125;$/p' file.txt</span><br><span class="line"></span><br><span class="line">awk '/^([0-9]&#123;3&#125;-|\([0-9]&#123;3&#125;\) )[0-9]&#123;3&#125;-[0-9]&#123;4&#125;$/' file.txt</span><br></pre></td></tr></table></figure>

<h4 id="198-House-Robber"><a href="#198-House-Robber" class="headerlink" title="198. House Robber"></a>198. House Robber</h4><p>在这道题了解到动态规划（<code>dynamic-programming</code>）</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">rob</span><span class="params">(nums []<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    prevMax := <span class="number">0</span></span><br><span class="line">    currMax := <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i:=<span class="number">0</span>; i &lt; <span class="built_in">len</span>(nums); i++ &#123;</span><br><span class="line">        temp:=currMax</span><br><span class="line">        <span class="keyword">if</span> prevMax + nums[i] &gt; currMax &#123;</span><br><span class="line">            currMax = prevMax + nums[i]</span><br><span class="line">        &#125;</span><br><span class="line">        prevMax = temp</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> currMax</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// input [1,2,3,1]</span></span><br><span class="line"><span class="comment">// output 4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// temp = currMax = 0</span></span><br><span class="line"><span class="comment">// 0+1 = 1 &gt; 0</span></span><br><span class="line"><span class="comment">// currMax = 1</span></span><br><span class="line"><span class="comment">// prevMax = 0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// temp = currMax = 1</span></span><br><span class="line"><span class="comment">// 0 + 2 &gt; 1</span></span><br><span class="line"><span class="comment">// currMax = 2</span></span><br><span class="line"><span class="comment">// prevMax = 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// temp = currMax = 2</span></span><br><span class="line"><span class="comment">// 1 + 3 = 4 &gt; 2</span></span><br><span class="line"><span class="comment">// currMax = 4</span></span><br><span class="line"><span class="comment">// prevMax = 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// temp = currMax = 4</span></span><br><span class="line"><span class="comment">// 2 + 1 &gt; 4</span></span><br><span class="line"><span class="comment">// prevMax = 4</span></span><br><span class="line"><span class="comment">// return 4</span></span><br></pre></td></tr></table></figure>

<h2 id="有趣的算法题"><a href="#有趣的算法题" class="headerlink" title="有趣的算法题"></a>有趣的算法题</h2><h4 id="LeetCode-155-题-Min-Stack"><a href="#LeetCode-155-题-Min-Stack" class="headerlink" title="LeetCode 155 题 Min Stack"></a>LeetCode 155 题 Min Stack</h4><p>Design a stack that supports push, pop, top, and retrieving the minimum element in constant time.</p>
<ul>
<li>push(x) – Push element x onto stack.</li>
<li>pop() – Removes the element on top of the stack.</li>
<li>top() – Get the top element.</li>
<li>getMin() – Retrieve the minimum element in the stack.</li>
</ul>
<p>Example:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">MinStack minStack = new MinStack();</span><br><span class="line">minStack.push(-2);</span><br><span class="line">minStack.push(0);</span><br><span class="line">minStack.push(-3);</span><br><span class="line">minStack.getMin();   --&gt; Returns -3.</span><br><span class="line">minStack.pop();</span><br><span class="line">minStack.top();      --&gt; Returns 0.</span><br><span class="line">minStack.getMin();   --&gt; Returns -2.</span><br></pre></td></tr></table></figure>

<h4 id="一种崭新的实现方案"><a href="#一种崭新的实现方案" class="headerlink" title="一种崭新的实现方案"></a>一种崭新的实现方案</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Stack <span class="keyword">struct</span> &#123;</span><br><span class="line">	num <span class="keyword">int</span> <span class="comment">// the current x</span></span><br><span class="line">	min <span class="keyword">int</span> <span class="comment">// the current mininum</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> MinStack <span class="keyword">struct</span> &#123;</span><br><span class="line">	Items []Stack</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Constructor</span><span class="params">()</span> <span class="title">MinStack</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> MinStack&#123;[]Stack&#123;&#125;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *MinStack)</span> <span class="title">Push</span><span class="params">(x <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> <span class="built_in">len</span>(this.Items) == <span class="number">0</span> &#123;</span><br><span class="line">		this.Items = <span class="built_in">append</span>(this.Items, Stack&#123;x, x&#125;)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		lastMin := this.Items[<span class="built_in">len</span>(this.Items)<span class="number">-1</span>].min</span><br><span class="line">		<span class="keyword">if</span> x &lt; lastMin &#123;</span><br><span class="line">			this.Items = <span class="built_in">append</span>(this.Items, Stack&#123;x, x&#125;)</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			this.Items = <span class="built_in">append</span>(this.Items, Stack&#123;x, lastMin&#125;)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *MinStack)</span> <span class="title">Pop</span><span class="params">()</span></span> &#123;</span><br><span class="line">	this.Items = this.Items[:<span class="built_in">len</span>(this.Items)<span class="number">-1</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *MinStack)</span> <span class="title">Top</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> this.Items[<span class="built_in">len</span>(this.Items)<span class="number">-1</span>].num</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *MinStack)</span> <span class="title">GetMin</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> this.Items[<span class="built_in">len</span>(this.Items)<span class="number">-1</span>].min</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your MinStack object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * obj := Constructor();</span></span><br><span class="line"><span class="comment"> * obj.Push(x);</span></span><br><span class="line"><span class="comment"> * obj.Pop();</span></span><br><span class="line"><span class="comment"> * param_3 := obj.Top();</span></span><br><span class="line"><span class="comment"> * param_4 := obj.GetMin();</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/26/Other/AStar/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Hei">
      <meta itemprop="description" content="心里有梦，眼里有光">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hei">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/26/Other/AStar/" class="post-title-link" itemprop="url">AStar</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-06-26 15:16:28 / 修改时间：15:18:25" itemprop="dateCreated datePublished" datetime="2020-06-26T15:16:28+08:00">2020-06-26</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>A Star 算法，实际上是一个寻路算法，常用于游戏的寻找路径，我们通常也称其为 A 星算法。当然啦<br>，我只是在看算法的时候，被领导叫去看这个算法的。乍看之下蛮简单的，实现起来，考虑的可能<br>会稍微多那么一点点东西。</p>
<p>主要参考：</p>
<p>1、博客园莫水千流的<a href="https://www.cnblogs.com/zhoug2020/p/3468167.html" target="_blank" rel="noopener">A 星寻路算法介绍</a></p>
<p>2、博客园我爱我家喵喵的<a href="https://www.cnblogs.com/yangyxd/articles/5447889.html" target="_blank" rel="noopener">UnityA-Star(A 星)寻路算法</a></p>
<p>通过阅读可以发现，A 星算法原理并不难，主要步骤如下：<br>1、设置起点、终点<br>2、需要两张表，open 表用来存储被考虑的点，close 表用来存储障碍点<br>3、从起点开始，计算以起点为中心的 F 量，选择最小的 F 量，不断循环<br>4、直到找到终点，然后再返回该路径。</p>
<p>G 量：是衡量行走的难度的计算，通常为了计算方便，走上下左右用 10 来表示，走斜对角用 14 来表示，其实也是勾股定理计算的出的。</p>
<p>H 量：是衡量该点到终点的距离，对于 H 量通常有三种计算方法，分别是：</p>
<p><img src="/2020/06/26/Other/AStar/123.png" alt="123.png"></p>
<p>曼哈顿算法（Manhattan Heuristic）：笔直的计算代价，不走对角线，也就是计算（x1-x0）+(y1-y0)</p>
<p>几何算法（Euclidean Heuristic）：通过勾股定理计算该点到终点的斜边距离</p>
<p>对角算法（Diagonal Heuristic）：先走对角，直到与终点垂直或者平行再走直线，算法中也就是通过比较 X 和 Y 的那个距离短，距离短的做走直角。</p>
<hr>
<p>本文用 golang 实现，才用的是最小堆结构，来保证每次弹出的点都是 F 量最小的点。</p>
<p>使用 container/heap 来保证实现，但是使用 container/heap 需要实现五个接口</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//heap Interface</span></span><br><span class="line"><span class="keyword">type</span> Interface <span class="keyword">interface</span> &#123;</span><br><span class="line">    sort.Interface</span><br><span class="line">    Push(x <span class="keyword">interface</span>&#123;&#125;) <span class="comment">// 向末尾添加元素</span></span><br><span class="line">    Pop() <span class="keyword">interface</span>&#123;&#125;   <span class="comment">// 从末尾删除元素</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//sort.Interface</span></span><br><span class="line"><span class="keyword">type</span> Interface <span class="keyword">interface</span> &#123;</span><br><span class="line">    <span class="comment">// Len方法返回集合中的元素个数</span></span><br><span class="line">    Len() <span class="keyword">int</span></span><br><span class="line">    <span class="comment">// Less方法报告索引i的元素是否比索引j的元素小</span></span><br><span class="line">    Less(i, j <span class="keyword">int</span>) <span class="keyword">bool</span></span><br><span class="line">    <span class="comment">// Swap方法交换索引i和j的两个元素</span></span><br><span class="line">    Swap(i, j <span class="keyword">int</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>需要实现这五个接口，才能调用 heap 中的函数。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/26/System/System/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Hei">
      <meta itemprop="description" content="心里有梦，眼里有光">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hei">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/26/System/System/" class="post-title-link" itemprop="url">System</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-06-26 15:15:07 / 修改时间：15:18:29" itemprop="dateCreated datePublished" datetime="2020-06-26T15:15:07+08:00">2020-06-26</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="操作系统"><a href="#操作系统" class="headerlink" title="操作系统"></a>操作系统</h1><h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ul>
<li><a href="#线程和进程">线程和进程</a></li>
</ul>
<h4 id="线程和进程"><a href="#线程和进程" class="headerlink" title="线程和进程"></a>线程和进程</h4><h4><font color="yellow">1、定义</font></h4>

<p>&emsp;&emsp;进程是表示资源分配的基本单位，又是调度运行的基本单位。但是在微内核系统中，进程的功能发生了变化，它只是资源分配的单位，<br>不再是系统调度运行的单位，系统调度运行的功能被分配到了线程中，而真正运行在 CPU 中的正是线程。</p>
<p>&emsp;&emsp;综上可知，进程是系统资源分配的最小单位，而线程是系统调度运行的最小单位（协程是程序自己实现调度的一种模式）。</p>
<h4>2、联系与区别</h4>

<p>&emsp;&emsp;联系：一个进程可以由若干个线程组成，线程与属于同一个进程的其它线程贡献该进程所拥有的全部资源。</p>
<p>&emsp;&emsp;区别：进程有独立的地址空间，线程没有独立的地址空间，而有共享的用户空间的是用户线程，没有共享的用户空间的是内核线程。</p>
<h4>3、通信方式</h4>
<div><h4>&emsp;&emsp;进程间的通信（IPC，InterProcess Communication）</h4>
<ol>
<li>无名管道：半双工通信（即数据只能在一个方向上流动），具有固定的读端和写端。只能用于亲缘关系的进程之间通信。</li>
<li>命名管道：（类似在进程中使用文件来进行传输数据）FIFO可以在无关的进程之间交换数据，与无名管道不同。FIFO有路径名与之相关联，它以一种特殊设备文件形式存在于文件系统中</li>

<li>消息队列：是消息的链接表，存放在内核中。一个消息队列由一个标识符（即队列ID）来标识。独立于发送和接受进程，进程终止时，消息队列及其内容不会被删除。</li>

<li>信号量：它是一个计数器。信号量用于实现进程间的互斥与同步，而不是用于存储进程间通信数据。信号量用于进程间同步，若要在进程间传递数
据需要结合共享内存。信号量基于操作系统的 PV 操作，程序对信号量的操作都是原子操作。每次对信号量的 PV 操作不仅限于对信号量值加 1 或
减 1，而且可以加减任意正整数。</li>

<li>共享内存：指两个或多个进程共享一个给定的存储区。共享内存是最快的一种 IPC，因为进程是直接对内存进行存取。因为多个进程可以同时操作，所以需
要进行同步。信号量+共享内存通常结合在一起使用，信号量用来同步对共享内存的访问。</li>

<li>信号（signal）：信号是一种比较复杂的通信方式，用于通知接收进程某一事件已经发生。</li>

<li>套接字（socket）：套接口也是一种进程间的通信机制，与其他通信机制不同的是它可以用于不同及其间的进程通信。</li>
</ol>

<br>
<h4>&emsp;&emsp;线程间的通信</h4>
&emsp;&emsp;Description：线程之间通信的两个基本问题是互斥和同步。

<p>&emsp;&emsp;线程同步是指线程之间所具有的一种制约关系，一个线程的执行依赖另一个线程的消息，当它没有得到另一个线程的消息时应等待，直到消息到达时才被唤醒。</p>
<p>&emsp;&emsp;线程互斥是指对于共享的操作系统资源（指的是广义的”资源”，而不是 Windows 的.res 文件，譬如全局变量就是一种共享资源），在各线程访问时的排它性。当有若干个线程都要使用某一共享资源时，任何时刻最多只允许一个线程去使用，其它要使用该资源的线程必须等待，直到占用资源者释放该资源。</p>
<p>&emsp;&emsp;线程互斥是一种特殊的线程同步。</p>
<ol>
<li>锁机制：供了以排它方式阻止数据结构被并发修改的方法。</li>
<li>信号量机制：包括无名线程信号量与有名线程信号量。</li>
<li>信号机制：类似于进程间的信号处理。</li>
</ol>

</div>

<h4>4、多进程和多线程的选择</h4>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/26/Go/GoTrick/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Hei">
      <meta itemprop="description" content="心里有梦，眼里有光">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hei">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/26/Go/GoTrick/" class="post-title-link" itemprop="url">GoTrick</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-06-26 15:12:44 / 修改时间：15:18:31" itemprop="dateCreated datePublished" datetime="2020-06-26T15:12:44+08:00">2020-06-26</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="GO-小知识、小陷进"><a href="#GO-小知识、小陷进" class="headerlink" title="GO 小知识、小陷进"></a>GO 小知识、小陷进</h1><h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ul>
<li><p><a href="#golang-dispatcher">golang 的调度系统简介</a></p>
</li>
<li><p><a href="#golang-deliver">golang 的值传递</a></p>
</li>
<li><p><a href="#golang-reflect">golang 的反射定律</a></p>
</li>
<li><p><a href="#golang-string-byte">golang 中文编码问题</a></p>
</li>
<li><p><a href="#golang-go">golang go 关键字的过程</a></p>
</li>
<li><p><a href="#golang-defer">golang defer</a></p>
</li>
<li><p><a href="#Golang-小陷阱">Golang-小陷阱</a></p>
</li>
<li><p><a href="#Golang死锁的原因">死锁的原因</a></p>
</li>
</ul>
<h4 id="golang-dispatcher"><a href="#golang-dispatcher" class="headerlink" title="golang dispatcher"></a>golang dispatcher</h4><p>因为<code>golang</code>想要实现高并发所以采取的 M:N 的内核线程与用户线程的印射，即一个用户线程可以对应多个内核线程，<br>一个内核线程也可以对应多个用户线程，而且为了便于管理 golang 的 GC，需要 golang 自己实现 goroutine 的调度。<br>golang 的调度系统主要基于 M-P-G 的结构，M 是内核线程，P 是上下文管理器，G 是 goroutine 也就是需要被调度的任务，<br>G 需要绑定 P 才能被 M 执行，当使用一个 go 关键字调起一个 goroutine 时，底层通过调用 newproc 生成一个新的调度任务，放入 GlobalRunningQueue 或者 LocalRunningQueue 中等待调度。当某个 P 阻塞的时候，该 P 下的 G 就会被放到其他的 P 中执行，如果<br>P 中的 G 执行完成，那么这个 P 会从 GlobalRunningQueue 中获取 G 或者从其他的 P 中偷一半的 G 来执行，当然 P 也会定期检测 GlobalRunningQueue<br>，防止 G 不被调用，P 不会饿死。</p>
<h4 id="golang-deliver"><a href="#golang-deliver" class="headerlink" title="golang deliver"></a>golang deliver</h4><p>golang 中赋值都是复制，如果赋值了一个指针，那我们就复制了一个指针副本。<br>如果赋值了一个结构体，那我们就复制了一个结构体副本。往函数里传参也是同样的情况。</p>
<p>但是有一点点不同的是，函数传参：</p>
<p>1、指针传递，传递的是指针的地址，但是形参的地址是另外一个，存储的是实参的地址，修改形参会直接修改实参</p>
<p>2、数组传递，传递的是数组的“值拷贝”，对形参进行操作并不会影响到实参</p>
<p>3、数组名传递，和 2 相同</p>
<p>4、Slice 传递，地址拷贝，传递的是底层数组的内存地址，修改形参实际上会修改实参</p>
<p>5、函数传递</p>
<h4 id="golang-reflect"><a href="#golang-reflect" class="headerlink" title="golang-reflect"></a>golang-reflect</h4><p>Golang 反射三大定律</p>
<p>1、反射第一定律：反射可以将“接口类型变量”转换为“反射类型对象”。</p>
<p>2、反射第二定律：反射可以将“反射类型对象”转换为“接口类型变量”。</p>
<p>3、反射第三定律：如果要修改“反射类型对象”，其值必须是“可写的”（settable）</p>
<h4 id="golang-string-byte"><a href="#golang-string-byte" class="headerlink" title="golang string byte"></a>golang string byte</h4><p>Golang 中 byte、string、rune 的关系</p>
<p>&emsp;&emsp;首先我们要知道 golang 的默认编码是 utf-8，中文 unicode 下是占两个字节，在 utf-8 下占三个字节，而在 string 底层使用 byte 数组<br>存，并且不可改变。直接对中文字符串<code>len()</code>操作得出的不一定是真实的长度，这是因为 byte 等同于 int8，常用来处理 ascii 字符，而 rune 等于 int32，常用来处理 unicode 和 utf-8 字符。<br>想要获取中文的话需要使用 rune 转换</p>
<h4 id="golang-go"><a href="#golang-go" class="headerlink" title="golang go"></a>golang go</h4><p>表达式 go f(x, y, z)会启动一个新的 goroutine 运行函数 f(x, y, z)。函数 f，变量 x、y、z 的值是在原 goroutine 计算的，只有函数 f 的执行是在新的 goroutine 中的</p>
<p>&emsp;&emsp;<code>defer</code>关键字的实现跟 go 关键字很类似，不同的是它调用的是 <code>runtime.deferproc</code> 而不是 <code>runtime.newproc</code></p>
<p><code>runtime.newproc</code>函数接受的参数分别是：参数大小，新的 goroutine 是要运行的函数，函数的 n 个参数。首先，让我们看一下如果是 C 代码新建一条线程的实<br>现会是什么样子的。大概会先建一个结构体，结构体里存 f、x、y 和 z 的值。然后写一个 help 函数，将这个结构体指针作为输入，函数体内调用 f(x, y, z)。<br>接下来，先填充结构体，然后调用 newThread(help, structptr)。其中 help 是刚刚那个函数，它会调用 f(x, y, z)。help 函数将作为所有新建线程的入口函数。</p>
<p>逃逸分析，从栈中逃逸到堆中</p>
<p>连续栈技术</p>
<h4 id="golang-defer"><a href="#golang-defer" class="headerlink" title="golang defer"></a>golang defer</h4><p><code>defer</code>是在<code>return</code>之后，函数真正返回之前执行，且<code>defer</code>的特<br>性有两个，先进后出和定义时参数就确定了。例子：</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	a,b := <span class="number">0</span>,<span class="number">1</span></span><br><span class="line">	<span class="keyword">defer</span> add(<span class="string">"m"</span>,a,add(<span class="string">"p"</span>,a,b))</span><br><span class="line">	fmt.Println(<span class="string">"stop start"</span>)</span><br><span class="line">	a = <span class="number">2</span></span><br><span class="line">	<span class="keyword">defer</span> add(<span class="string">"n"</span>,a,add(<span class="string">"k"</span>,a,b))</span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(s <span class="keyword">string</span>,a,b <span class="keyword">int</span>)</span><span class="title">int</span></span>&#123;</span><br><span class="line">	fmt.Println(s,a+b)</span><br><span class="line">	<span class="keyword">return</span> a+b</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//outputs:</span></span><br><span class="line"><span class="comment">//  p 1</span></span><br><span class="line"><span class="comment">//  stop start</span></span><br><span class="line"><span class="comment">//  k 3</span></span><br><span class="line"><span class="comment">//  n 5</span></span><br><span class="line"><span class="comment">//  m 1</span></span><br></pre></td></tr></table></figure>

<h4 id="Golang-小陷阱"><a href="#Golang-小陷阱" class="headerlink" title="Golang 小陷阱"></a>Golang 小陷阱</h4><p>golang 解析 <code>json</code> 时把所有的 <code>int</code>,<code>float</code>,<code>double</code> 等数字，向 <code>interface{}</code>解析时都当成 <code>float64</code>（当然被双引号包围的数字除外，任何被双引号包围的，都是字符串。</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"encoding/json"</span></span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> v <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">interface</span>&#123;&#125;</span><br><span class="line">    jsonstr := <span class="string">`&#123;"id":13,"name":"胖胖","weight":216.5,"dd":"123"&#125;`</span></span><br><span class="line">    json.Unmarshal([]<span class="keyword">byte</span>(jsonstr), &amp;v)</span><br><span class="line">    <span class="keyword">for</span> k, v1 := <span class="keyword">range</span> v &#123;</span><br><span class="line">        fmt.Print(k, <span class="string">" = "</span>)</span><br><span class="line">        <span class="keyword">switch</span> v1.(<span class="keyword">type</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="keyword">int</span>:</span><br><span class="line">            fmt.Println(v1, <span class="string">"is an int value."</span>)</span><br><span class="line">        <span class="keyword">case</span> <span class="keyword">string</span>:</span><br><span class="line">            fmt.Println(v1, <span class="string">"is a string value."</span>)</span><br><span class="line">        <span class="keyword">case</span> <span class="keyword">int64</span>:</span><br><span class="line">            fmt.Println(v1, <span class="string">"is an int64 value."</span>)</span><br><span class="line">        <span class="keyword">case</span> <span class="keyword">float64</span>:</span><br><span class="line">            fmt.Println(v1, <span class="string">"is an float64 value."</span>)</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            fmt.Println(v1, <span class="string">"is an unknown type."</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//output:</span></span><br><span class="line"><span class="comment">// weight = 216.5 is an float64 value.</span></span><br><span class="line"><span class="comment">// dd = 123 is a string value.</span></span><br><span class="line"><span class="comment">// id = 13 is an float64 value.</span></span><br><span class="line"><span class="comment">// name = 胖胖 is a string value.</span></span><br><span class="line"><span class="comment">// Process exiting with code: 0</span></span><br></pre></td></tr></table></figure>

<h4 id="Golang-死锁的原因"><a href="#Golang-死锁的原因" class="headerlink" title="Golang 死锁的原因"></a>Golang 死锁的原因</h4><p>形成死锁的四个必要条件：</p>
<ul>
<li>互斥条件：一个资源每次只能被一个进程所使用</li>
<li>请求与保持条件：一个进程因请求资源而阻塞时，对已获得的资源保持不放</li>
<li>不剥夺条件：进程已获得的资源，在未使用完之前，不能强行剥夺</li>
<li>循环等待条件：若干个进程之间形成一种头尾相接的循环等待资源关系</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/26/Go/GoResource/HttpRequest/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Hei">
      <meta itemprop="description" content="心里有梦，眼里有光">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hei">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/26/Go/GoResource/HttpRequest/" class="post-title-link" itemprop="url">HttpRequest</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-06-26 15:09:30 / 修改时间：15:11:21" itemprop="dateCreated datePublished" datetime="2020-06-26T15:09:30+08:00">2020-06-26</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Golang-的-request-源码阅读"><a href="#Golang-的-request-源码阅读" class="headerlink" title="Golang 的 request 源码阅读"></a>Golang 的 request 源码阅读</h1><h2 id="Request-结构体"><a href="#Request-结构体" class="headerlink" title="Request 结构体"></a>Request 结构体</h2><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Request <span class="keyword">struct</span> &#123;</span><br><span class="line">	Method <span class="keyword">string</span></span><br><span class="line">	URL *url.URL</span><br><span class="line">	Proto      <span class="keyword">string</span> <span class="comment">// "HTTP/1.0"</span></span><br><span class="line">	ProtoMajor <span class="keyword">int</span>    <span class="comment">// 1</span></span><br><span class="line">	ProtoMinor <span class="keyword">int</span>    <span class="comment">// 0</span></span><br><span class="line">	<span class="comment">// Header contains the request header fields either received</span></span><br><span class="line">	<span class="comment">// by the server or to be sent by the client.</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// If a server received a request with header lines,</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">//	Host: example.com</span></span><br><span class="line">	<span class="comment">//	accept-encoding: gzip, deflate</span></span><br><span class="line">	<span class="comment">//	Accept-Language: en-us</span></span><br><span class="line">	<span class="comment">//	fOO: Bar</span></span><br><span class="line">	<span class="comment">//	foo: two</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// then</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">//	Header = map[string][]string&#123;</span></span><br><span class="line">	<span class="comment">//		"Accept-Encoding": &#123;"gzip, deflate"&#125;,</span></span><br><span class="line">	<span class="comment">//		"Accept-Language": &#123;"en-us"&#125;,</span></span><br><span class="line">	<span class="comment">//		"Foo": &#123;"Bar", "two"&#125;,</span></span><br><span class="line">	<span class="comment">//	&#125;</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// For incoming requests, the Host header is promoted to the</span></span><br><span class="line">	<span class="comment">// Request.Host field and removed from the Header map.</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// HTTP defines that header names are case-insensitive. The</span></span><br><span class="line">	<span class="comment">// request parser implements this by using CanonicalHeaderKey,</span></span><br><span class="line">	<span class="comment">// making the first character and any characters following a</span></span><br><span class="line">	<span class="comment">// hyphen uppercase and the rest lowercase.</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// For client requests, certain headers such as Content-Length</span></span><br><span class="line">	<span class="comment">// and Connection are automatically written when needed and</span></span><br><span class="line">	<span class="comment">// values in Header may be ignored. See the documentation</span></span><br><span class="line">	<span class="comment">// for the Request.Write method.</span></span><br><span class="line">	Header Header</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Body is the request's body.</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// For client requests a nil body means the request has no</span></span><br><span class="line">	<span class="comment">// body, such as a GET request. The HTTP Client's Transport</span></span><br><span class="line">	<span class="comment">// is responsible for calling the Close method.</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// For server requests the Request Body is always non-nil</span></span><br><span class="line">	<span class="comment">// but will return EOF immediately when no body is present.</span></span><br><span class="line">	<span class="comment">// The Server will close the request body. The ServeHTTP</span></span><br><span class="line">	<span class="comment">// Handler does not need to.</span></span><br><span class="line">	Body io.ReadCloser</span><br><span class="line">	GetBody <span class="function"><span class="keyword">func</span><span class="params">()</span> <span class="params">(io.ReadCloser, error)</span></span></span><br><span class="line">	ContentLength <span class="keyword">int64</span></span><br><span class="line">	TransferEncoding []<span class="keyword">string</span></span><br><span class="line">	Close <span class="keyword">bool</span></span><br><span class="line">	Host <span class="keyword">string</span></span><br><span class="line">	Form url.Values</span><br><span class="line">	PostForm url.Values</span><br><span class="line">	MultipartForm *multipart.Form</span><br><span class="line">	Trailer Header</span><br><span class="line">	RemoteAddr <span class="keyword">string</span></span><br><span class="line">	RequestURI <span class="keyword">string</span></span><br><span class="line">	<span class="comment">// TLS allows HTTP servers and other software to record</span></span><br><span class="line">	<span class="comment">// information about the TLS connection on which the request</span></span><br><span class="line">	<span class="comment">// was received. This field is not filled in by ReadRequest.</span></span><br><span class="line">	<span class="comment">// The HTTP server in this package sets the field for</span></span><br><span class="line">	<span class="comment">// TLS-enabled connections before invoking a handler;</span></span><br><span class="line">	<span class="comment">// otherwise it leaves the field nil.</span></span><br><span class="line">	<span class="comment">// This field is ignored by the HTTP client.</span></span><br><span class="line">	TLS *tls.ConnectionState</span><br><span class="line">	Cancel &lt;-<span class="keyword">chan</span> <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line">	Response *Response</span><br><span class="line">	ctx context.Context</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>request</code>的字段意思</p>
<ul>
<li><p><code>Method</code>,<code>string</code>类型，显示 http 请求的方法（如 GET、POST 等），如果客户端传上来的是空值那么默认就是 GET 方法。</p>
</li>
<li><p><code>URL</code>,<code>*url.URL</code>类型，请求的<code>URL</code></p>
</li>
<li><p><code>Proto</code>,<code>string</code>类型，<code>HTTP/1.0</code></p>
</li>
<li><p><code>ProtoMajor</code>, <code>string</code>类型，<code>1</code></p>
</li>
<li><p><code>ProtoMinor</code>, <code>string</code>类型，<code>0</code></p>
</li>
<li><p><code>Hearder</code>, <code>Hearder</code>类型（<code>map[string][]string</code>），接受到的请求头信息解析到这个<code>map</code>中，<code>Host</code>字段会被删除，<code>key</code>不区分大小写（实际上会让所有的<code>key</code>变成第一个为大写字母，后面的所有都是小写字母）。<code>Content-Length</code>和<code>Connection</code>会被自动写入<code>Hearder</code>中。</p>
</li>
<li><p><code>Body</code>, <code>io.ReadCloser</code>类型（接口类型），客户端的<code>body</code>可能是空的（比如说<code>GET</code>方法），客户端传输的话就是调用<code>body</code>的<code>close</code>方法。而对于服务端而言，<code>body</code>永远都是非空的（<code>non-nil</code>），当当前没有<code>body</code>的时候会返回<code>EOF</code>。服务端会关闭这个<code>request.body</code>。</p>
</li>
<li><p><code>GetBody</code>, <code>func()(io.ReadCloser,error)</code>，GetBody 定义了一个可选的 <code>func</code>来返回 <code>Body</code> 的新副本。 当重定向需要多次读取主体时，它用于客户端请求。 使用 <code>GetBody</code> 仍然需要设置 <code>Body</code>。对于服务器请求，它未被使用。</p>
</li>
<li><p><code>ContentLength</code>,<code>int64</code>类型，记录关联内容的长度。 值<code>-1</code>表示长度未知。 值<code>&gt; = 0</code>表示可以从 Body 读取给定的字节数。 对于客户端请求，具有非零主体的值为 0 也被视为未知。</p>
</li>
<li><p><code>TransferEncoding</code>,<code>[]string</code>类型。</p>
</li>
<li><p><code>CLose</code>,<code>bool</code>类型。<code>Close</code>表示在回复此请求后（对于服务器）或发送此请求并读取其响应（对于客户端）之后是否关闭连接。<br>对于服务器请求，HTTP 服务器自动处理此请求，处理程序不需要此字段。<br>对于客户端请求，设置此字段可防止在对相同主机的请求之间重复使用 TCP 连接，就像设置了<code>Transport.DisableKeepAlives</code>一样。</p>
</li>
<li><p><code>Host</code>, <code>string</code>类型。</p>
</li>
<li><p><code>PostForm</code>, <code>url.Values</code>类型，需要在主动调用<code>ParseForm</code>后才可以使用，包含 POST、PATCH、PUT 的请求 body 中的参数。</p>
</li>
<li><p><code>MultipartForm</code>, <code>*multipart.Form</code>类型，需要主动调用<code>ParseMultipartForm</code>后才可以读取，包含文件上传等表单信息。</p>
</li>
<li><p><code>Trailer</code> ,<code>Header</code>类型。</p>
</li>
<li><p><code>RemoteAddr</code>, <code>string</code>类型。</p>
</li>
<li><p><code>RequestURI</code>, <code>string</code>类型。</p>
</li>
<li><p><code>TLS</code>, <code>*tls.ConnectionState</code>类型。</p>
</li>
<li><p><code>Cancel</code>, <code>&lt;-chan struct{}</code>类型。</p>
</li>
<li><p><code>Response</code>,<code>*Response</code>类型。</p>
</li>
<li><p><code>ctx</code> ,<code>context.Context</code>类型。</p>
</li>
</ul>
<h2 id="Request-的方法"><a href="#Request-的方法" class="headerlink" title="Request 的方法"></a>Request 的方法</h2><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r *Request)</span> <span class="title">Context</span><span class="params">()</span> <span class="title">context</span>.<span class="title">Context</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> r.ctx != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> r.ctx</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> context.Background()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Hei"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Hei</p>
  <div class="site-description" itemprop="description">心里有梦，眼里有光</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">27</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/hei6775" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;hei6775" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://stackoverflow.com/users/8523015/hey6775" title="StackOverflow → https:&#x2F;&#x2F;stackoverflow.com&#x2F;users&#x2F;8523015&#x2F;hey6775" rel="noopener" target="_blank"><i class="fab fa-stack-overflow fa-fw"></i>StackOverflow</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Hei</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
